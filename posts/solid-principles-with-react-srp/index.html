<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>SOLID Principles With React - SRP | Hakka Blog</title><meta name=keywords content><meta name=description content="Hi 大家好我是 Curt 家人
系列相關文章 SOLID Principles With React SOLID Principles With React - SRP (單一職責原則) SOLID Principles With React - OCP (開放封閉原則) SOLID Principles Without React - LSP (里氏替換原則) SOLID Principles With React - ISP (介面隔離原則) SOLID Principles With React - DIP (依賴反轉原則) SRP 首先來看第一個規則 SRP，中文又叫單一職責原則， 其實從字面上可以很簡單的猜到他要表達的意思， 也就是說每個 module、class 或 function 只需要負責做一件事情就好，不要將太多無關或複雜的邏輯放在裡面。
比如說湯匙就是拿來挖食物的工具，但卻設計成可以挖食物又可以拿來當作吸管喝飲料的東西， 這樣一來如果要將吸管的功能改成可以彎折的效果，那就要考慮到會不會影響湯匙的功能，進而增加他們之間的耦合度。
我們來看一下定義是怎麼描述的
A class should have only one reason to change - Robert C. Martin
中文意思是 每個類別只能有一個可以修改它的理由"><meta name=author content><link rel=canonical href=https://curt6815463.github.io/hakka-dev-blog/posts/solid-principles-with-react-srp/><link crossorigin=anonymous href=https://curt6815463.github.io/hakka-dev-blog/assets/css/stylesheet.min.3764877ba3a5494f5186c907876e4ed3f4d81cc8b5c752600f4d27d8cdfd1b45.css integrity="sha256-N2SHe6OlSU9RhskHh25O0/TYHMi1x1JgD00n2M39G0U=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=https://curt6815463.github.io/hakka-dev-blog/assets/js/highlight.min.e85ad0406048e8176e1c7661b25d5c69297ddfe41dc4124cf75ecb99a4f7b3d1.js integrity="sha256-6FrQQGBI6BduHHZhsl1caSl93+QdxBJM917LmaT3s9E=" onload=hljs.initHighlightingOnLoad()></script> <link rel=icon href=https://curt6815463.github.io/hakka-dev-blog/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://curt6815463.github.io/hakka-dev-blog/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://curt6815463.github.io/hakka-dev-blog/favicon-32x32.png><link rel=apple-touch-icon href=https://curt6815463.github.io/hakka-dev-blog/apple-touch-icon.png><link rel=mask-icon href=https://curt6815463.github.io/hakka-dev-blog/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=stylesheet href=https://curt6815463.github.io/hakka-dev-blog/css/custom.css><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="SOLID Principles With React - SRP"><meta property="og:description" content="Hi 大家好我是 Curt 家人
系列相關文章 SOLID Principles With React SOLID Principles With React - SRP (單一職責原則) SOLID Principles With React - OCP (開放封閉原則) SOLID Principles Without React - LSP (里氏替換原則) SOLID Principles With React - ISP (介面隔離原則) SOLID Principles With React - DIP (依賴反轉原則) SRP 首先來看第一個規則 SRP，中文又叫單一職責原則， 其實從字面上可以很簡單的猜到他要表達的意思， 也就是說每個 module、class 或 function 只需要負責做一件事情就好，不要將太多無關或複雜的邏輯放在裡面。
比如說湯匙就是拿來挖食物的工具，但卻設計成可以挖食物又可以拿來當作吸管喝飲料的東西， 這樣一來如果要將吸管的功能改成可以彎折的效果，那就要考慮到會不會影響湯匙的功能，進而增加他們之間的耦合度。
我們來看一下定義是怎麼描述的
A class should have only one reason to change - Robert C. Martin
中文意思是 每個類別只能有一個可以修改它的理由"><meta property="og:type" content="article"><meta property="og:url" content="https://curt6815463.github.io/hakka-dev-blog/posts/solid-principles-with-react-srp/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-06-23T02:25:32+08:00"><meta property="article:modified_time" content="2022-06-23T02:25:32+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="SOLID Principles With React - SRP"><meta name=twitter:description content="Hi 大家好我是 Curt 家人
系列相關文章 SOLID Principles With React SOLID Principles With React - SRP (單一職責原則) SOLID Principles With React - OCP (開放封閉原則) SOLID Principles Without React - LSP (里氏替換原則) SOLID Principles With React - ISP (介面隔離原則) SOLID Principles With React - DIP (依賴反轉原則) SRP 首先來看第一個規則 SRP，中文又叫單一職責原則， 其實從字面上可以很簡單的猜到他要表達的意思， 也就是說每個 module、class 或 function 只需要負責做一件事情就好，不要將太多無關或複雜的邏輯放在裡面。
比如說湯匙就是拿來挖食物的工具，但卻設計成可以挖食物又可以拿來當作吸管喝飲料的東西， 這樣一來如果要將吸管的功能改成可以彎折的效果，那就要考慮到會不會影響湯匙的功能，進而增加他們之間的耦合度。
我們來看一下定義是怎麼描述的
A class should have only one reason to change - Robert C. Martin
中文意思是 每個類別只能有一個可以修改它的理由"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://curt6815463.github.io/hakka-dev-blog/posts/"},{"@type":"ListItem","position":2,"name":"SOLID Principles With React - SRP","item":"https://curt6815463.github.io/hakka-dev-blog/posts/solid-principles-with-react-srp/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"SOLID Principles With React - SRP","name":"SOLID Principles With React - SRP","description":"Hi 大家好我是 Curt 家人\n系列相關文章 SOLID Principles With React SOLID Principles With React - SRP (單一職責原則) SOLID Principles With React - OCP (開放封閉原則) SOLID Principles Without React - LSP (里氏替換原則) SOLID Principles With React - ISP (介面隔離原則) SOLID Principles With React - DIP (依賴反轉原則) SRP 首先來看第一個規則 SRP，中文又叫單一職責原則， 其實從字面上可以很簡單的猜到他要表達的意思， 也就是說每個 module、class 或 function 只需要負責做一件事情就好，不要將太多無關或複雜的邏輯放在裡面。\n比如說湯匙就是拿來挖食物的工具，但卻設計成可以挖食物又可以拿來當作吸管喝飲料的東西， 這樣一來如果要將吸管的功能改成可以彎折的效果，那就要考慮到會不會影響湯匙的功能，進而增加他們之間的耦合度。\n我們來看一下定義是怎麼描述的\nA class should have only one reason to change - Robert C. Martin\n中文意思是 每個類別只能有一個可以修改它的理由","keywords":[],"articleBody":"Hi 大家好我是 Curt 家人\n系列相關文章 SOLID Principles With React SOLID Principles With React - SRP (單一職責原則) SOLID Principles With React - OCP (開放封閉原則) SOLID Principles Without React - LSP (里氏替換原則) SOLID Principles With React - ISP (介面隔離原則) SOLID Principles With React - DIP (依賴反轉原則) SRP 首先來看第一個規則 SRP，中文又叫單一職責原則， 其實從字面上可以很簡單的猜到他要表達的意思， 也就是說每個 module、class 或 function 只需要負責做一件事情就好，不要將太多無關或複雜的邏輯放在裡面。\n比如說湯匙就是拿來挖食物的工具，但卻設計成可以挖食物又可以拿來當作吸管喝飲料的東西， 這樣一來如果要將吸管的功能改成可以彎折的效果，那就要考慮到會不會影響湯匙的功能，進而增加他們之間的耦合度。\n我們來看一下定義是怎麼描述的\nA class should have only one reason to change - Robert C. Martin\n中文意思是 每個類別只能有一個可以修改它的理由\n也就是說，如果某個類別出現了兩個理由要修改它，是不是就代表它做了兩件事情？ 因此不符合 SRP。\n除此之外，封裝 也是 SRP 中很重要的事情，如果將功能拆成了好幾個元件，卻不知道怎麼用，那不如不要拆。\n因此我們要能將元件的實作細節給隱藏起來，並提供一個很好的介面來讓使用者使用。\n接著我們來看一些範例吧！\n物件導向的範例 情境：需要一個類別來計算班上所有學生的分數總和，並且將結果輸出給使用者。\n首先我們來建立一些學生的資料\nconst studentA = { name: \"小劉\", grade: 20 }; const studentB = { name: \"小紅\", grade: 30 }; const studentC = { name: \"小白\", grade: 40 }; const studens = [studentA, studentB, studentC]; 接著將學生們的成績傳入 StudentsGrades class，由它幫我完成加總以及顯示結果。\nconst studentsGrades = new StudentsGrades(studens); studentsGrades.printReport(); 開始實作 StudentsGrades class\nclass StudentsGrades { constructor(students = []) { this.students = students; } sum() { return this.students.reduce((acc, student) =\u003e { return acc + student.grade; }, 0); } printReport() { return console.log(`Their total grades are ${this.sum()}`); } } 最後結果\n\"Their total grades are 90\" 看完以上的範例我們可以發現，StudentsGrades 類別除了負責加總（sum）之外，還實作了 printReport，是不是就一個 class 負責了兩件事情？ 也就會有兩個原因造成 StudentsGrades 需要修改。\n如果需要更改輸出的格式，那我們要修改 StudentsGrades 的 printReport 如果需要更改加總的規則，例如客家人學生額外加 10 分，那我們要修改 StudentsGrades 的 sum 因此違反了 SRP，那可以怎麼改呢？ 就是將這兩個邏輯拆成不同 class\nsum 的部分變成 SumStudentsGrades\nclass SumStudentsGrades { constructor(students = []) { this.students = students; } sum() { return this.students.reduce((acc, student) =\u003e { return acc + student.grade; }, 0); } } printReport 部分變成 StudentReportPrinter\nclass StudentReportPrinter { constructor(sumStudentsGrades) { if (!sumStudentsGrades instanceof SumStudentsGrades) { throw \"not instance of SumStudentsGrades\"; } this.sumStudentsGrades = sumStudentsGrades; } printReport() { return console.log( `Their total grades are ${this.sumStudentsGrades.sum()}` ); } } 使用時變成這樣\nconst sumStudentsGrades = new SumStudentsGrades(studens); const printer = new StudentReportPrinter(sumStudentsGrades); printer.printReport(); 這樣一來他們就負責各自的職責，每個 class 也只存在一個修改的理由。\nReact 的範例 情境：從後端 fetch 使用者列表資料並顯示在畫面上\n首先建立 UserListPage component，並用 map 列出每個使用者\nimport { useEffect, useState } from \"react\"; const UserListPage = () =\u003e { const [users, setUsers] = useState([]); return ( \u003cdiv\u003e \u003ch1\u003e User List Page \u003c/h1\u003e \u003cdiv\u003e {users.map((user) =\u003e ( \u003cdiv key={user.id}\u003e \u003cdiv\u003e{user.name}\u003c/div\u003e \u003cdiv\u003e{user.email}\u003c/div\u003e \u003cbr /\u003e \u003c/div\u003e ))} \u003c/div\u003e \u003c/div\u003e ); }; export default UserListPage; 接著在 useEffect 裡面 fetch api 資料\n// UserListPage.js import { useEffect, useState } from \"react\"; const UserListPage = () =\u003e { const [users, setUsers] = useState([]); useEffect(() =\u003e { fetch(\"https://jsonplaceholder.typicode.com/users\") .then((res) =\u003e { return res.json(); }) .then((data) =\u003e { setUsers(data); }); }, []); return ( \u003cdiv\u003e \u003ch1\u003e User List Page \u003c/h1\u003e \u003cdiv\u003e {users.map((user) =\u003e ( \u003cdiv key={user.id}\u003e \u003cdiv\u003e{user.name}\u003c/div\u003e \u003cdiv\u003e{user.email}\u003c/div\u003e \u003cbr /\u003e \u003c/div\u003e ))} \u003c/div\u003e \u003c/div\u003e ); }; export default UserListPage; 好，現在來思考一下 UserListPage 是不是可以拆一下？\nuseEffect 裡面的做的事情跟 網路請求 有關，應該可以將它獨立出去，寫成一個 useUserData 的 hook。\n變成\n// useUserData.js import { useEffect, useState } from \"react\"; const useUserData = () =\u003e { const [users, setUsers] = useState([]); useEffect(() =\u003e { fetch(\"https://jsonplaceholder.typicode.com/users\") .then((res) =\u003e { return res.json(); }) .then((data) =\u003e { setUsers(data); }); }, []); return { users }; }; export default useUserData; 然後 UserListPage 變成\n//UserListPage.js import useUserData from \"./useUserData.js\"; const UserListPage = () =\u003e { const { users } = useUserData(); return ( \u003cdiv\u003e \u003ch1\u003e User List Page \u003c/h1\u003e \u003cdiv\u003e {users.map((user) =\u003e ( \u003cdiv key={user.id}\u003e \u003cdiv\u003e{user.name}\u003c/div\u003e \u003cdiv\u003e{user.email}\u003c/div\u003e \u003cbr /\u003e \u003c/div\u003e ))} \u003c/div\u003e \u003c/div\u003e ); }; export default UserListPage; 是不是看起來乾淨許多了？\n不過仔細想一下，這個 component 叫做 UserListPage，主要負責 條列 出每個 user 的資料，所以我只要 focus 在怎麼列出他們就好，至於裡面的內容長什麼樣子，應該不用去關心吧？\n因此來試著將 map 裡面的內容在獨立出去，變成 UserDetail component\n// UserDetail.js const UserDetail = ({ user }) =\u003e { return ( \u003cdiv\u003e \u003cdiv\u003e{user.name}\u003c/div\u003e \u003cdiv\u003e{user.email}\u003c/div\u003e \u003cbr /\u003e \u003c/div\u003e ); }; export default UserDetail; 最後 UserListPage 的樣子\nimport UserDetail from \"./UserDetail.js\"; import useUserData from \"./useUserData.js\"; const UserListPage = () =\u003e { const { users } = useUserData(); return ( \u003cdiv\u003e \u003ch1\u003e User List Page \u003c/h1\u003e \u003cdiv\u003e {users.map((user) =\u003e ( \u003cUserDetail key={user.id} user={user} /\u003e ))} \u003c/div\u003e \u003c/div\u003e ); }; export default UserListPage; 以後網路請求的部分有需要更改 -\u003e useUserDate 以後條列的方式要改，EX: 由新到舊 or 舊到新 -\u003e UserListPage 以後使用者顯示資料要增減 -\u003e UserDetail SRP 總結 以上就是我對 SRP 套用到 React 上的心得，我覺得它算是五個原則裡面相對好懂的規則，卻也非常考驗工程師的內功，以上都是簡單以及特別設計過的情境，但是在現實專案上，需要有長期的實務經驗，才能知道怎麼將大塊的邏輯拆得既合理又實用， 不然最後只是為了拆而拆，搞的專案凌亂又難以理解。\nNEXT -\u003e SOLID Principles With React - OCP\nReferences Single-responsibility principle - wiki SOLID: The First 5 Principles of Object Oriented Design SOLID Principles in React How To Apply SOLID Principles To Clean Your Code in React ","wordCount":"641","inLanguage":"en","datePublished":"2022-06-23T02:25:32+08:00","dateModified":"2022-06-23T02:25:32+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://curt6815463.github.io/hakka-dev-blog/posts/solid-principles-with-react-srp/"},"publisher":{"@type":"Organization","name":"Hakka Blog","logo":{"@type":"ImageObject","url":"https://curt6815463.github.io/hakka-dev-blog/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://curt6815463.github.io/hakka-dev-blog/ accesskey=h title="Hakka Blog (Alt + H)">Hakka Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>SOLID Principles With React - SRP</h1><div class=post-meta><span title='2022-06-23 02:25:32 +0800 +0800'>June 23, 2022</span></div></header><div class=post-content><p>Hi 大家好我是 Curt 家人</p><h1 id=系列相關文章>系列相關文章<a hidden class=anchor aria-hidden=true href=#系列相關文章>#</a></h1><ul><li><a href=https://curt6815463.github.io/hakka-dev-blog/posts/solid-principles-with-react/>SOLID Principles With React</a></li><li><a href=https://curt6815463.github.io/hakka-dev-blog/posts/solid-principles-with-react-srp/>SOLID Principles With React - SRP (單一職責原則)</a></li><li><a href=https://curt6815463.github.io/hakka-dev-blog/posts/solid-principles-with-react-ocp/>SOLID Principles With React - OCP (開放封閉原則)</a></li><li><a href=https://curt6815463.github.io/hakka-dev-blog/posts/solid-principles-without-react-lsp/>SOLID Principles Without React - LSP (里氏替換原則)</a></li><li>SOLID Principles With React - ISP (介面隔離原則)</li><li>SOLID Principles With React - DIP (依賴反轉原則)</li></ul><h1 id=srp>SRP<a hidden class=anchor aria-hidden=true href=#srp>#</a></h1><p>首先來看第一個規則 SRP，中文又叫單一職責原則，
其實從字面上可以很簡單的猜到他要表達的意思，
也就是說每個 module、class 或 function 只需要負責做一件事情就好，不要將太多無關或複雜的邏輯放在裡面。</p><p>比如說湯匙就是拿來挖食物的工具，但卻設計成可以挖食物又可以拿來當作吸管喝飲料的東西，
這樣一來如果要將吸管的功能改成可以彎折的效果，那就要考慮到會不會影響湯匙的功能，進而增加他們之間的耦合度。</p><p>我們來看一下定義是怎麼描述的</p><blockquote><p>A class should have only one reason to change - Robert C. Martin</p></blockquote><p>中文意思是 <code>每個類別只能有一個可以修改它的理由</code></p><p>也就是說，如果某個類別出現了兩個理由要修改它，是不是就代表它做了兩件事情？ 因此不符合 SRP。</p><p>除此之外，<code>封裝</code> 也是 SRP 中很重要的事情，如果將功能拆成了好幾個元件，卻不知道怎麼用，那不如不要拆。</p><p>因此我們要能將元件的實作細節給隱藏起來，並提供一個很好的介面來讓使用者使用。</p><p>接著我們來看一些範例吧！</p><h2 id=物件導向的範例>物件導向的範例<a hidden class=anchor aria-hidden=true href=#物件導向的範例>#</a></h2><p>情境：需要一個類別來計算班上所有學生的分數總和，並且將結果輸出給使用者。</p><p>首先我們來建立一些學生的資料</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>studentA</span> <span style=color:#f92672>=</span> { <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;小劉&#34;</span>, <span style=color:#a6e22e>grade</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>20</span> };
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>studentB</span> <span style=color:#f92672>=</span> { <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;小紅&#34;</span>, <span style=color:#a6e22e>grade</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>30</span> };
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>studentC</span> <span style=color:#f92672>=</span> { <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;小白&#34;</span>, <span style=color:#a6e22e>grade</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>40</span> };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>studens</span> <span style=color:#f92672>=</span> [<span style=color:#a6e22e>studentA</span>, <span style=color:#a6e22e>studentB</span>, <span style=color:#a6e22e>studentC</span>];
</span></span></code></pre></div><p>接著將學生們的成績傳入 StudentsGrades class，由它幫我完成加總以及顯示結果。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>studentsGrades</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>StudentsGrades</span>(<span style=color:#a6e22e>studens</span>);
</span></span><span style=display:flex><span><span style=color:#a6e22e>studentsGrades</span>.<span style=color:#a6e22e>printReport</span>();
</span></span></code></pre></div><p>開始實作 StudentsGrades class</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>StudentsGrades</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>constructor</span>(<span style=color:#a6e22e>students</span> <span style=color:#f92672>=</span> []) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>students</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>students</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>sum</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>students</span>.<span style=color:#a6e22e>reduce</span>((<span style=color:#a6e22e>acc</span>, <span style=color:#a6e22e>student</span>) =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>acc</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>student</span>.<span style=color:#a6e22e>grade</span>;
</span></span><span style=display:flex><span>    }, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>printReport</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>`Their total grades are </span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>sum</span>()<span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>最後結果</p><pre tabindex=0><code>&#34;Their total grades are 90&#34;
</code></pre><p>看完以上的範例我們可以發現，StudentsGrades 類別除了負責加總（sum）之外，還實作了 printReport，是不是就一個 class 負責了兩件事情？ 也就會有兩個原因造成 StudentsGrades 需要修改。</p><ul><li>如果需要更改輸出的格式，那我們要修改 StudentsGrades 的 printReport</li><li>如果需要更改加總的規則，例如客家人學生額外加 10 分，那我們要修改 StudentsGrades 的 sum</li></ul><p>因此違反了 SRP，那可以怎麼改呢？
就是將這兩個邏輯拆成不同 class</p><p>sum 的部分變成 SumStudentsGrades</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SumStudentsGrades</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>constructor</span>(<span style=color:#a6e22e>students</span> <span style=color:#f92672>=</span> []) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>students</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>students</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>sum</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>students</span>.<span style=color:#a6e22e>reduce</span>((<span style=color:#a6e22e>acc</span>, <span style=color:#a6e22e>student</span>) =&gt; {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>acc</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>student</span>.<span style=color:#a6e22e>grade</span>;
</span></span><span style=display:flex><span>    }, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>printReport 部分變成 StudentReportPrinter</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>StudentReportPrinter</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>constructor</span>(<span style=color:#a6e22e>sumStudentsGrades</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>sumStudentsGrades</span> <span style=color:#66d9ef>instanceof</span> <span style=color:#a6e22e>SumStudentsGrades</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>throw</span> <span style=color:#e6db74>&#34;not instance of SumStudentsGrades&#34;</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>sumStudentsGrades</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>sumStudentsGrades</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>printReport</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(
</span></span><span style=display:flex><span>      <span style=color:#e6db74>`Their total grades are </span><span style=color:#e6db74>${</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>sumStudentsGrades</span>.<span style=color:#a6e22e>sum</span>()<span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>使用時變成這樣</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>sumStudentsGrades</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>SumStudentsGrades</span>(<span style=color:#a6e22e>studens</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>printer</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>StudentReportPrinter</span>(<span style=color:#a6e22e>sumStudentsGrades</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>printer</span>.<span style=color:#a6e22e>printReport</span>();
</span></span></code></pre></div><p>這樣一來他們就負責各自的職責，每個 class 也只存在一個修改的理由。</p><h2 id=react-的範例>React 的範例<a hidden class=anchor aria-hidden=true href=#react-的範例>#</a></h2><p>情境：從後端 fetch 使用者列表資料並顯示在畫面上</p><p>首先建立 UserListPage component，並用 map 列出每個使用者</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useEffect</span>, <span style=color:#a6e22e>useState</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;react&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>UserListPage</span> <span style=color:#f92672>=</span> () =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>users</span>, <span style=color:#a6e22e>setUsers</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>([]);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>h1</span><span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>User</span> <span style=color:#a6e22e>List</span> <span style=color:#a6e22e>Page</span> <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/h1&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        {<span style=color:#a6e22e>users</span>.<span style=color:#a6e22e>map</span>((<span style=color:#a6e22e>user</span>) =&gt; (
</span></span><span style=display:flex><span>          <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span> <span style=color:#a6e22e>key</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>user</span>.<span style=color:#a6e22e>id</span>}<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span><span style=color:#f92672>&gt;</span>{<span style=color:#a6e22e>user</span>.<span style=color:#a6e22e>name</span>}<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span><span style=color:#f92672>&gt;</span>{<span style=color:#a6e22e>user</span>.<span style=color:#a6e22e>email</span>}<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>br</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;</span>
</span></span><span style=display:flex><span>        ))}
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>UserListPage</span>;
</span></span></code></pre></div><p>接著在 useEffect 裡面 fetch api 資料</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#75715e>// UserListPage.js
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useEffect</span>, <span style=color:#a6e22e>useState</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;react&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>UserListPage</span> <span style=color:#f92672>=</span> () =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>users</span>, <span style=color:#a6e22e>setUsers</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>([]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>useEffect</span>(() =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fetch</span>(<span style=color:#e6db74>&#34;https://jsonplaceholder.typicode.com/users&#34;</span>)
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>then</span>((<span style=color:#a6e22e>res</span>) =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>json</span>();
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>then</span>((<span style=color:#a6e22e>data</span>) =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>setUsers</span>(<span style=color:#a6e22e>data</span>);
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>  }, []);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>h1</span><span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>User</span> <span style=color:#a6e22e>List</span> <span style=color:#a6e22e>Page</span> <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/h1&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        {<span style=color:#a6e22e>users</span>.<span style=color:#a6e22e>map</span>((<span style=color:#a6e22e>user</span>) =&gt; (
</span></span><span style=display:flex><span>          <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span> <span style=color:#a6e22e>key</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>user</span>.<span style=color:#a6e22e>id</span>}<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span><span style=color:#f92672>&gt;</span>{<span style=color:#a6e22e>user</span>.<span style=color:#a6e22e>name</span>}<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span><span style=color:#f92672>&gt;</span>{<span style=color:#a6e22e>user</span>.<span style=color:#a6e22e>email</span>}<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>br</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;</span>
</span></span><span style=display:flex><span>        ))}
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>UserListPage</span>;
</span></span></code></pre></div><p>好，現在來思考一下 UserListPage 是不是可以拆一下？</p><p>useEffect 裡面的做的事情跟 <code>網路請求</code> 有關，應該可以將它獨立出去，寫成一個 useUserData 的 hook。</p><p>變成</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#75715e>// useUserData.js
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useEffect</span>, <span style=color:#a6e22e>useState</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;react&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>useUserData</span> <span style=color:#f92672>=</span> () =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>users</span>, <span style=color:#a6e22e>setUsers</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>([]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>useEffect</span>(() =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fetch</span>(<span style=color:#e6db74>&#34;https://jsonplaceholder.typicode.com/users&#34;</span>)
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>then</span>((<span style=color:#a6e22e>res</span>) =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>json</span>();
</span></span><span style=display:flex><span>      })
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>then</span>((<span style=color:#a6e22e>data</span>) =&gt; {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>setUsers</span>(<span style=color:#a6e22e>data</span>);
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>  }, []);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> { <span style=color:#a6e22e>users</span> };
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>useUserData</span>;
</span></span></code></pre></div><p>然後 UserListPage 變成</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#75715e>//UserListPage.js
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>useUserData</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;./useUserData.js&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>UserListPage</span> <span style=color:#f92672>=</span> () =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>users</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>useUserData</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>h1</span><span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>User</span> <span style=color:#a6e22e>List</span> <span style=color:#a6e22e>Page</span> <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/h1&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        {<span style=color:#a6e22e>users</span>.<span style=color:#a6e22e>map</span>((<span style=color:#a6e22e>user</span>) =&gt; (
</span></span><span style=display:flex><span>          <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span> <span style=color:#a6e22e>key</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>user</span>.<span style=color:#a6e22e>id</span>}<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span><span style=color:#f92672>&gt;</span>{<span style=color:#a6e22e>user</span>.<span style=color:#a6e22e>name</span>}<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span><span style=color:#f92672>&gt;</span>{<span style=color:#a6e22e>user</span>.<span style=color:#a6e22e>email</span>}<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>br</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;</span>
</span></span><span style=display:flex><span>        ))}
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>UserListPage</span>;
</span></span></code></pre></div><p>是不是看起來乾淨許多了？</p><p>不過仔細想一下，這個 component 叫做 UserListPage，主要負責 <code>條列</code> 出每個 user 的資料，所以我只要 focus 在怎麼列出他們就好，至於裡面的內容長什麼樣子，應該不用去關心吧？</p><p>因此來試著將 map 裡面的內容在獨立出去，變成 UserDetail component</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#75715e>// UserDetail.js
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>UserDetail</span> <span style=color:#f92672>=</span> ({ <span style=color:#a6e22e>user</span> }) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span><span style=color:#f92672>&gt;</span>{<span style=color:#a6e22e>user</span>.<span style=color:#a6e22e>name</span>}<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span><span style=color:#f92672>&gt;</span>{<span style=color:#a6e22e>user</span>.<span style=color:#a6e22e>email</span>}<span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>br</span> <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>UserDetail</span>;
</span></span></code></pre></div><p>最後 UserListPage 的樣子</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>UserDetail</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;./UserDetail.js&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>useUserData</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;./useUserData.js&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>UserListPage</span> <span style=color:#f92672>=</span> () =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>users</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>useUserData</span>();
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> (
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>h1</span><span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>User</span> <span style=color:#a6e22e>List</span> <span style=color:#a6e22e>Page</span> <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/h1&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        {<span style=color:#a6e22e>users</span>.<span style=color:#a6e22e>map</span>((<span style=color:#a6e22e>user</span>) =&gt; (
</span></span><span style=display:flex><span>          <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>UserDetail</span> <span style=color:#a6e22e>key</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>user</span>.<span style=color:#a6e22e>id</span>} <span style=color:#a6e22e>user</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>user</span>} <span style=color:#f92672>/&gt;</span>
</span></span><span style=display:flex><span>        ))}
</span></span><span style=display:flex><span>      <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div&gt;</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>UserListPage</span>;
</span></span></code></pre></div><ul><li>以後網路請求的部分有需要更改 -> useUserDate</li><li>以後條列的方式要改，EX: 由新到舊 or 舊到新 -> UserListPage</li><li>以後使用者顯示資料要增減 -> UserDetail</li></ul><h2 id=srp-總結>SRP 總結<a hidden class=anchor aria-hidden=true href=#srp-總結>#</a></h2><p>以上就是我對 SRP 套用到 React 上的心得，我覺得它算是五個原則裡面相對好懂的規則，卻也非常考驗工程師的內功，以上都是簡單以及特別設計過的情境，但是在現實專案上，需要有長期的實務經驗，才能知道怎麼將大塊的邏輯拆得既合理又實用，
不然最後只是為了拆而拆，搞的專案凌亂又難以理解。</p><p>NEXT -> <a href=https://curt6815463.github.io/hakka-dev-blog/posts/solid-principles-with-react-ocp/>SOLID Principles With React - OCP</a></p><h2 id=references>References<a hidden class=anchor aria-hidden=true href=#references>#</a></h2><ul><li><a href=https://en.wikipedia.org/wiki/Single-responsibility_principle>Single-responsibility principle - wiki</a></li><li><a href=https://www.digitalocean.com/community/conceptual_articles/s-o-l-i-d-the-first-five-principles-of-object-oriented-design>SOLID: The First 5 Principles of Object Oriented Design</a></li><li><a href=https://www.everydayreact.com/articles/solid-principles-in-react>SOLID Principles in React</a></li><li><a href=https://betterprogramming.pub/how-to-apply-solid-principles-to-clean-your-code-in-react-cdfd5e0a9cea>How To Apply SOLID Principles To Clean Your Code in React</a></li></ul></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://curt6815463.github.io/hakka-dev-blog/>Hakka Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>